//display product

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href=
"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
         rel="stylesheet">
    <script src=
"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js">
    </script>
</head>
<body>
<div class="container p-5 bg-light">




<form action="displayproduct.php" method="post">
        <div class="row g-5">
            <div class="col-auto">
            <input type="search" name="searchinput" id="" placeholder="Search" class="form-control">
            </div>
            <div class="col-auto">
            <input type="submit" name = "search" value="Search" class="btn-primary btn">
            </div>
        </div>
</form>

    



<?php



require_once "dbconnection.php";


// if (!$conn->connect_error) {
//     echo "connected";
// }


$ccselectsql = "Select * from tbl_product";




if (isset($_POST['search'])) {
    $ccusersearch = $_POST['searchinput'];


    $ccselectsql = "Select * from tbl_product where product_name like '%".$ccusersearch."%'
    OR product_id like '%".$ccusersearch."%'
    OR category like '%".$ccusersearch."%'
    ";
} else {
    $ccselectsql = "Select * from tbl_product";
}


$ccresult = $conn->query($ccselectsql);


if ($ccresult->num_rows > 0) {


    ?>




<table class="table table-success">
    <tr>
        <th>
            Product ID
        </th>
        <th>
            Product Name
        </th>
        <th>
            Description
        </th>
        <th>
            Price
        </th>
        <th>
            Available Quantity
        </th>
        <th>
            Category
        </th>
    </tr>








    <?php
    foreach ($ccresult as $ccfieldname) {
        echo "<tr>";
        echo "<td>".$ccfieldname['product_id']."</td>";
        echo "<td>".$ccfieldname['product_name']."</td>";
        echo "<td>".$ccfieldname['description']."</td>";
        echo "<td>".$ccfieldname['price']."</td>";
        echo "<td>".$ccfieldname['available_quantity']."</td>";
        echo "<td>".$ccfieldname['category']."</td>";
        echo "<tr>";
    }


    ?>








</table>


    <?php
   
} else {
    echo "no record found";
}




?>



</div>



</body>


</html>

//add products

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href=
"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
         rel="stylesheet">
    <script src=
"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js">
    </script>
</head>
<body>


<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    Add new Product
  </button>

<div class="collapse" id="collapseExample">
 
<form action="addproducts.php" method="post">
    <div class="container p-5 w-50 border border-primary rounded mt-5">
    



    <div class="row">
        <div class="col">
                <div class="form-outline">

                <label class="form-label" id="productname-label" for="productname">Product Name: </label>
                    <input type="text" id="ProductN" name="ProductName" class="form-control" >
                    
                </div>
            </div>
            
    </div>

    <br>


    <div class="row">
        <div class="col">

        <label class="form-label" for="form6Example7">Product Description: </label>
        <textarea class="form-control" name="ProductDesc" id="form6Example7" rows="4"></textarea>
        
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col text">

        <label class="form-label" for="form6Example7">Set Price: </label>

        <div class="input-group mb-3">

         <span class="input-group-text">â‚±</span>
         <input type="text" class="form-control" name="ProductPrice">
            <span class="input-group-text">.00</span>

        </div>
        
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">

        <label class="form-label" for="form6Example7">Available Quantity: </label>
        <input type="number" class="form-control" name="ProductQuantity" min = "0" max = "100">
        
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">

        <label class="form-label" for="form6Example6">Product Category: </label>

        <select name="ProductCategory" class="form-control" id="">
            <option disabled selected> Please select product category</option>
            <option> 1</option>
            <option> 2</option>
            <option> 3</option>
        </select>
      
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col mt-3">  
            <input type="submit"  name="sub" class="btn btn-primary btn-block w-100" value="Save Details" id=sub>
        </div>
    </div>
    </form>

</div>


    

    <?php


require_once "dbconnection.php";



if (isset($_POST['sub'])) {
   $pName = $_POST['ProductName'];
   $pDesc = $_POST['ProductDesc'];
   $pPrice = $_POST['ProductPrice'];
   $pQuantity = $_POST['ProductQuantity'];
   $pCategory = $_POST['ProductCategory'];



   $insertsql = "Insert into tbl_product (product_name,description,price,available_quantity,category) values ('$pName','$pDesc','$pPrice','$pQuantity','$pCategory')";


   $result = $conn->query($insertsql);
   ?>





</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>




</body>
</html>



<?php

if($result == TRUE){
 ?>

 <script>
     Swal.fire({
     position: "center",
     icon: "success",
     title: "Your work has been saved",
     showConfirmButton: false,
     timer: 1500
     });
 </script>


 <?php

}else{
 echo $conn->error;
}
}






?>



